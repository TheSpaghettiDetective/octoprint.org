<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en" xmlns="http://www.w3.org/1999/html"> <!--<![endif]-->
<head>
    <meta charset="utf-8" />

    <title>OctoPrint.org - node-fetch</title>
    <meta name="description" content="OctoPrint is the snappy web interface for your 3D printer that allows you to control and monitor all aspects of your printer and print jobs, right from your browser.">
    <meta name="author" content="Gina Häußge">
    <meta name="google-site-verification" content="0EFsbaNygJcEinKPmzP-hTf0Ju6wDIpJxO5zvQtOQT0" />
    <meta name="google-site-verification" content="i7e8SG0JfDqFkxQgr1_ZuirRzwJomS8xzPvb0mLHujM" />
    <meta name="referrer" content="same-origin">

    

    <!--[if lt IE 9]>
    <script src="/assets/js/html5shim.js?_=1628098106"></script>
    <![endif]-->

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le styles -->
    <link rel="stylesheet" href="/assets/css/site.css?_=1628098106">
    <link rel="stylesheet" href="/assets/css/bootstrap-responsive.css?_=1628098106">
    <link rel="stylesheet" href="/assets/css/prettify.css?_=1628098106">
    <link rel="stylesheet" href="/assets/css/lightbox.css?_=1628098106">
    <link rel="stylesheet" href="/assets/css/fontawesome-all.min.css?_=1628098106">
    <link rel="stylesheet" href="/assets/css/syntax.css?_=1628098106">

    <link rel="stylesheet" type="text/css" href="/assets/vendor/slick-1.5.9/slick.css?_=1628098106"/>
    <link rel="stylesheet" type="text/css" href="/assets/vendor/slick-1.5.9/slick-theme.css?_=1628098106"/>


    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/assets/img/tentacle-32x32.png">
    <link rel="apple-touch-icon" href="/assets/img/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/apple-touch-icon-144x144.png">

    <!-- Le RSS feed -->
    <link rel="alternate" type="application/rss+xml" title="OctoPrint.org: OctoBlog" href="/feeds/all.xml">

    <!-- Le social media meta data -->
    
    

    

    

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@OctoPrint3D" />
    <meta name="twitter:title" content="node-fetch" />
    <meta name="twitter:description" content="OctoPrint is the snappy web interface for your 3D printer that allows you to control and monitor all aspects of your printer and print jobs, right from your browser." />
    <meta name="twitter:image" content="https://octoprint.org/assets/img/octoprint-avatar-240x240.png" />

    <meta property="og:title" content="node-fetch" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://octoprint.org/assets/img/octoprint-600x400.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:description" content="OctoPrint is the snappy web interface for your 3D printer that allows you to control and monitor all aspects of your printer and print jobs, right from your browser." />
    <meta property="og:site_name" content="OctoPrint.org" />
    <meta property="og:url" content="https://octoprint.org/node_modules/node-fetch/" />

    <meta itemscope itemtype="http://schema.org/WebPage" />
    <meta itemprop="headline" content="node-fetch" />
    <meta itemprop="description" content="OctoPrint is the snappy web interface for your 3D printer that allows you to control and monitor all aspects of your printer and print jobs, right from your browser." />
    <meta itemprop="image" content="https://octoprint.org/assets/img/octoprint-600x400.png" />

    <script>
        var shiftWindow = function() { scrollBy(0, -40) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
    </script>

    <!-- Carbon -->
    <script>
        var disableStr = "carbon-disable";
        function carbonOptout() {
            //document.cookie = disableStr + "=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/; domain=octoprint.org";
            document.cookie = disableStr + "=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/; domain=octoprint.org";
            window[disableStr] = true;
            alert("Carbon Ads sind jetzt deaktiviert! / Carbon Ads are now deactivated!");
        }
        if (document.cookie.indexOf(disableStr + "=true") > -1) {
            window[disableStr] = true;
        }
    </script>

    <!-- Cookie consent -->
    <link rel="stylesheet" type="text/css" href="/assets/css/cookieconsent.min.css" />
    <script src="/assets/js/cookieconsent.min.js"></script>
    <script>
        if (!String.prototype.startsWith) {
            String.prototype.startsWith = function(search, pos) {
            return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;
            };
        }

        
        window.addEventListener("load", function(){
            window.cookieconsent.hasTransition = false;
            window.cookieconsent.initialise({
                "position": "bottom",
                "theme": "edgeless",
                "palette": {
                    "popup": {
                        "background": "#000000",
                        "link": "#10a800"
                    },
                    "button": {
                        "background": "#0b7500"
                    }
                },
                "elements": {
                    "messagelink": '<span id="cookieconsent:desc" class="cc-message">{{message}} <a aria-label="learn more about cookies" tabindex="0" class="cc-link" href="{{href}}" target="_blank">{{link}}</a> or <a aria-label="privacy policy" tabindex="1" class="cc-link" href="/privacy/" target="_blank">read our Privacy Policy</a></span>'
                }
            })
        });
        

        /**
         * Make sure octoprint.github.io stuff gets rewritten to octoprint.org.
         * See https://github.com/OctoPrint/plugins.octoprint.org/issues/146.
         */
        var githubio = "octoprint.github.io/octoprint.org";
        var url = window.location.href;
        if (url && (url.startsWith("http://" + githubio) || url.startsWith("https://" + githubio))) {
            url = url.replace(githubio, "octoprint.org");
            window.location.replace(url);
        }
    </script>
</head>

<body onload="load()">

<div id="top"></div>



<div id="navigation" class="navbar navbar-inverse navbar-fixed-top unfixed" data-scroll-header>
  <div class="navbar-inner">
    <div class="container">
      <a class="brand hidden-phone" href="/"><img src="/assets/img/tentacle-20x20.png" alt="Tentacle logo" class="tentacle"> OctoPrint.org</a>
      <a class="brand visible-phone" href="/"><img src="/assets/img/tentacle-20x20.png" alt="Tentacle logo" class="tentacle"></a>
      <a href="javascript:void(0)" class="btn btn-burger btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><i class="fas fa-bars"></i></a>
      <div class="pull-right">
        <ul class="nav social-navbar">
          <li><a href="/merch/" title="Get some merchandise!"><i class="fa fa-shopping-basket"></i></a></li>
          <li><a href="/support-octoprint/" title="Support OctoPrint!" data-event-category="supportlink" data-event-action="navigation"><i class="fas fa-donate"></i></a></li>
        </ul>
      </div>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li><a href="/blog/">Blog</a></li>
          <li><a href="https://community.octoprint.org">Forum</a></li>
          <li><a href="/download/">Download</a></li>
          <li><a href="/support-octoprint/" title="Support the project!" data-event-category="supportlink" data-event-action="donate">Donate</a></li>
          <li><a href="/merch/" title="Get some merchandise!" data-event-category="merchlink" data-event-action="navbar">Merchandise</a></li>
          <li><a href="http://plugins.octoprint.org">Plugins</a></li>
          <li class="dropdown">
            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">More... <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="https://github.com/foosel/OctoPrint/wiki">Wiki</a></li>
              <li><a href="http://docs.octoprint.org">Documentation</a></li>
              <li><a href="https://community.octoprint.org/c/support/faq">FAQ</a></li>
              <li><a href="/media/">Media</a></li>
              <li class="divider"></li>
              <li><a href="/conduct/">Code of Conduct</a></li>
              <li class="divider"></li>
              <li><a href="https://github.com/foosel/OctoPrint">Source</a></li>
              <li><a href="https://github.com/foosel/OctoPrint/blob/master/CONTRIBUTING.md">Contribution Guidelines</a></li>
              <li><a href="https://github.com/foosel/OctoPrint/issues">Issuetracker</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


<div id="wrap">
    <div id="main">
    <div class="jumbotron">
    <div class="container">
        <div class="row">
            <div class="span12">
                <div class="hero-content pageheader">
                    <h1>node-fetch</h1>
                    
                </div>
            </div>
        </div>
    </div>
</div>


<div class="container">
    <div class="content row-fluid">
        <div class="span12">
            <h1 id="node-fetch">node-fetch</h1>

<p><a href="https://www.npmjs.com/package/node-fetch"><img src="https://flat.badgen.net/npm/v/node-fetch" alt="npm version" /></a>
<a href="https://travis-ci.org/bitinn/node-fetch"><img src="https://flat.badgen.net/travis/bitinn/node-fetch" alt="build status" /></a>
<a href="https://codecov.io/gh/bitinn/node-fetch"><img src="https://flat.badgen.net/codecov/c/github/bitinn/node-fetch/master" alt="coverage status" /></a>
<a href="https://packagephobia.now.sh/result?p=node-fetch"><img src="https://flat.badgen.net/packagephobia/install/node-fetch" alt="install size" /></a>
<a href="https://discord.gg/Zxbndcm"><img src="https://img.shields.io/discord/619915844268326952?color=%237289DA&amp;label=Discord&amp;style=flat-square" alt="Discord" /></a></p>

<p>A light-weight module that brings <code class="language-plaintext highlighter-rouge">window.fetch</code> to Node.js</p>

<p>(We are looking for <a href="https://github.com/bitinn/node-fetch/issues/567">v2 maintainers and collaborators</a>)</p>

<p><a href="https://opencollective.com/node-fetch"><img src="https://opencollective.com/node-fetch/backers.svg" alt="Backers" /></a></p>

<!-- TOC -->

<ul>
  <li><a href="#motivation">Motivation</a></li>
  <li><a href="#features">Features</a></li>
  <li><a href="#difference-from-client-side-fetch">Difference from client-side fetch</a></li>
  <li><a href="#installation">Installation</a></li>
  <li><a href="#loading-and-configuring-the-module">Loading and configuring the module</a></li>
  <li><a href="#common-usage">Common Usage</a>
    <ul>
      <li><a href="#plain-text-or-html">Plain text or HTML</a></li>
      <li><a href="#json">JSON</a></li>
      <li><a href="#simple-post">Simple Post</a></li>
      <li><a href="#post-with-json">Post with JSON</a></li>
      <li><a href="#post-with-form-parameters">Post with form parameters</a></li>
      <li><a href="#handling-exceptions">Handling exceptions</a></li>
      <li><a href="#handling-client-and-server-errors">Handling client and server errors</a></li>
    </ul>
  </li>
  <li><a href="#advanced-usage">Advanced Usage</a>
    <ul>
      <li><a href="#streams">Streams</a></li>
      <li><a href="#buffer">Buffer</a></li>
      <li><a href="#accessing-headers-and-other-meta-data">Accessing Headers and other Meta data</a></li>
      <li><a href="#extract-set-cookie-header">Extract Set-Cookie Header</a></li>
      <li><a href="#post-data-using-a-file-stream">Post data using a file stream</a></li>
      <li><a href="#post-with-form-data-detect-multipart">Post with form-data (detect multipart)</a></li>
      <li><a href="#request-cancellation-with-abortsignal">Request cancellation with AbortSignal</a></li>
    </ul>
  </li>
  <li><a href="#api">API</a>
    <ul>
      <li><a href="#fetchurl-options">fetch(url[, options])</a></li>
      <li><a href="#options">Options</a></li>
      <li><a href="#class-request">Class: Request</a></li>
      <li><a href="#class-response">Class: Response</a></li>
      <li><a href="#class-headers">Class: Headers</a></li>
      <li><a href="#interface-body">Interface: Body</a></li>
      <li><a href="#class-fetcherror">Class: FetchError</a></li>
    </ul>
  </li>
  <li><a href="#license">License</a></li>
  <li><a href="#acknowledgement">Acknowledgement</a></li>
</ul>

<!-- /TOC -->

<h2 id="motivation">Motivation</h2>

<p>Instead of implementing <code class="language-plaintext highlighter-rouge">XMLHttpRequest</code> in Node.js to run browser-specific <a href="https://github.com/github/fetch">Fetch polyfill</a>, why not go from native <code class="language-plaintext highlighter-rouge">http</code> to <code class="language-plaintext highlighter-rouge">fetch</code> API directly? Hence, <code class="language-plaintext highlighter-rouge">node-fetch</code>, minimal code for a <code class="language-plaintext highlighter-rouge">window.fetch</code> compatible API on Node.js runtime.</p>

<p>See Matt Andrews’ <a href="https://github.com/matthew-andrews/isomorphic-fetch">isomorphic-fetch</a> or Leonardo Quixada’s <a href="https://github.com/lquixada/cross-fetch">cross-fetch</a> for isomorphic usage (exports <code class="language-plaintext highlighter-rouge">node-fetch</code> for server-side, <code class="language-plaintext highlighter-rouge">whatwg-fetch</code> for client-side).</p>

<h2 id="features">Features</h2>

<ul>
  <li>Stay consistent with <code class="language-plaintext highlighter-rouge">window.fetch</code> API.</li>
  <li>Make conscious trade-off when following <a href="https://fetch.spec.whatwg.org/">WHATWG fetch spec</a> and <a href="https://streams.spec.whatwg.org/">stream spec</a> implementation details, document known differences.</li>
  <li>Use native promise but allow substituting it with [insert your favorite promise library].</li>
  <li>Use native Node streams for body on both request and response.</li>
  <li>Decode content encoding (gzip/deflate) properly and convert string output (such as <code class="language-plaintext highlighter-rouge">res.text()</code> and <code class="language-plaintext highlighter-rouge">res.json()</code>) to UTF-8 automatically.</li>
  <li>Useful extensions such as timeout, redirect limit, response size limit, <a href="ERROR-HANDLING.md">explicit errors</a> for troubleshooting.</li>
</ul>

<h2 id="difference-from-client-side-fetch">Difference from client-side fetch</h2>

<ul>
  <li>See <a href="LIMITS.md">Known Differences</a> for details.</li>
  <li>If you happen to use a missing feature that <code class="language-plaintext highlighter-rouge">window.fetch</code> offers, feel free to open an issue.</li>
  <li>Pull requests are welcomed too!</li>
</ul>

<h2 id="installation">Installation</h2>

<p>Current stable release (<code class="language-plaintext highlighter-rouge">2.x</code>)</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>node-fetch
</code></pre></div></div>

<h2 id="loading-and-configuring-the-module">Loading and configuring the module</h2>
<p>We suggest you load the module via <code class="language-plaintext highlighter-rouge">require</code> until the stabilization of ES modules in node:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fetch</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">node-fetch</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>If you are using a Promise library other than native, set it through <code class="language-plaintext highlighter-rouge">fetch.Promise</code>:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Bluebird</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">bluebird</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">.</span><span class="nb">Promise</span> <span class="o">=</span> <span class="nx">Bluebird</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="common-usage">Common Usage</h2>

<p>NOTE: The documentation below is up-to-date with <code class="language-plaintext highlighter-rouge">2.x</code> releases; see the <a href="https://github.com/bitinn/node-fetch/blob/1.x/README.md"><code class="language-plaintext highlighter-rouge">1.x</code> readme</a>, <a href="https://github.com/bitinn/node-fetch/blob/1.x/CHANGELOG.md">changelog</a> and <a href="UPGRADE-GUIDE.md">2.x upgrade guide</a> for the differences.</p>

<h4 id="plain-text-or-html">Plain text or HTML</h4>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://github.com/</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">body</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="json">JSON</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.github.com/users/github</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="simple-post">Simple Post</h4>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://httpbin.org/post</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">a=1</span><span class="dl">'</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span> <span class="c1">// expecting a json response</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="post-with-json">Post with JSON</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">1</span> <span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://httpbin.org/post</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">post</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">body</span><span class="p">:</span>    <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">),</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span> <span class="p">},</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="post-with-form-parameters">Post with form parameters</h4>
<p><code class="language-plaintext highlighter-rouge">URLSearchParams</code> is available in Node.js as of v7.5.0. See <a href="https://nodejs.org/api/url.html#url_class_urlsearchparams">official documentation</a> for more usage methods.</p>

<p>NOTE: The <code class="language-plaintext highlighter-rouge">Content-Type</code> header is only set automatically to <code class="language-plaintext highlighter-rouge">x-www-form-urlencoded</code> when an instance of <code class="language-plaintext highlighter-rouge">URLSearchParams</code> is given as such:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">URLSearchParams</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">url</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URLSearchParams</span><span class="p">();</span>
<span class="nx">params</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://httpbin.org/post</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">params</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="handling-exceptions">Handling exceptions</h4>
<p>NOTE: 3xx-5xx responses are <em>NOT</em> exceptions and should be handled in <code class="language-plaintext highlighter-rouge">then()</code>; see the next section for more information.</p>

<p>Adding a catch to the fetch promise chain will catch <em>all</em> exceptions, such as errors originating from node core libraries, network errors and operational errors, which are instances of FetchError. See the <a href="ERROR-HANDLING.md">error handling document</a>  for more details.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://domain.invalid/</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="handling-client-and-server-errors">Handling client and server errors</h4>
<p>It is common to create a helper function to check that the response contains no client (4xx) or server (5xx) error responses:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">checkStatus</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// res.status &gt;= 200 &amp;&amp; res.status &lt; 300</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="nx">MyCustomError</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://httpbin.org/status/400</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">checkStatus</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">will not get here...</span><span class="dl">'</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="advanced-usage">Advanced Usage</h2>

<h4 id="streams">Streams</h4>
<p>The “Node.js way” is to use streams when possible:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://assets-cdn.github.com/images/modules/logos_page/Octocat.png</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">dest</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">./octocat.png</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">dest</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div></div>

<h4 id="buffer">Buffer</h4>
<p>If you prefer to cache binary data in full, use buffer(). (NOTE: <code class="language-plaintext highlighter-rouge">buffer()</code> is a <code class="language-plaintext highlighter-rouge">node-fetch</code>-only API)</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">fileType</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">file-type</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://assets-cdn.github.com/images/modules/logos_page/Octocat.png</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">buffer</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">buffer</span> <span class="o">=&gt;</span> <span class="nx">fileType</span><span class="p">(</span><span class="nx">buffer</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">type</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">});</span>
</code></pre></div></div>

<h4 id="accessing-headers-and-other-meta-data">Accessing Headers and other Meta data</h4>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://github.com/</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">raw</span><span class="p">());</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">content-type</span><span class="dl">'</span><span class="p">));</span>
    <span class="p">});</span>
</code></pre></div></div>

<h4 id="extract-set-cookie-header">Extract Set-Cookie Header</h4>

<p>Unlike browsers, you can access raw <code class="language-plaintext highlighter-rouge">Set-Cookie</code> headers manually using <code class="language-plaintext highlighter-rouge">Headers.raw()</code>. This is a <code class="language-plaintext highlighter-rouge">node-fetch</code> only API.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// returns an array of values, instead of a string of comma-separated values</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">raw</span><span class="p">()[</span><span class="dl">'</span><span class="s1">set-cookie</span><span class="dl">'</span><span class="p">]);</span>
<span class="p">});</span>
</code></pre></div></div>

<h4 id="post-data-using-a-file-stream">Post data using a file stream</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">createReadStream</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">stream</span> <span class="o">=</span> <span class="nx">createReadStream</span><span class="p">(</span><span class="dl">'</span><span class="s1">input.txt</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://httpbin.org/post</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">stream</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="post-with-form-data-detect-multipart">Post with form-data (detect multipart)</h4>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">FormData</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">form-data</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">form</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://httpbin.org/post</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">form</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>

<span class="c1">// OR, using custom headers</span>
<span class="c1">// NOTE: getHeaders() is non-standard API</span>

<span class="kd">const</span> <span class="nx">form</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">();</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">form</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="nx">form</span><span class="p">.</span><span class="nx">getHeaders</span><span class="p">()</span>
<span class="p">}</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://httpbin.org/post</span><span class="dl">'</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</code></pre></div></div>

<h4 id="request-cancellation-with-abortsignal">Request cancellation with AbortSignal</h4>

<blockquote>
  <p>NOTE: You may cancel streamed requests only on Node &gt;= v8.0.0</p>
</blockquote>

<p>You may cancel requests with <code class="language-plaintext highlighter-rouge">AbortController</code>. A suggested implementation is <a href="https://www.npmjs.com/package/abort-controller"><code class="language-plaintext highlighter-rouge">abort-controller</code></a>.</p>

<p>An example of timing out a request after 150ms could be achieved as the following:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">AbortController</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">abort-controller</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AbortController</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">timeout</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span>
  <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span> <span class="p">},</span>
  <span class="mi">150</span><span class="p">,</span>
<span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span> <span class="na">signal</span><span class="p">:</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span>
    <span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">useData</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">AbortError</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// request was aborted</span>
      <span class="p">}</span>
    <span class="p">},</span>
  <span class="p">)</span>
  <span class="p">.</span><span class="k">finally</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>See <a href="https://github.com/bitinn/node-fetch/blob/master/test/test.js">test cases</a> for more examples.</p>

<h2 id="api">API</h2>

<h3 id="fetchurl-options">fetch(url[, options])</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">url</code> A string representing the URL for fetching</li>
  <li><code class="language-plaintext highlighter-rouge">options</code> <a href="#fetch-options">Options</a> for the HTTP(S) request</li>
  <li>Returns: <code>Promise&lt;[Response](#class-response)&gt;</code></li>
</ul>

<p>Perform an HTTP(S) fetch.</p>

<p><code class="language-plaintext highlighter-rouge">url</code> should be an absolute url, such as <code class="language-plaintext highlighter-rouge">https://example.com/</code>. A path-relative URL (<code class="language-plaintext highlighter-rouge">/file/under/root</code>) or protocol-relative URL (<code class="language-plaintext highlighter-rouge">//can-be-http-or-https.com/</code>) will result in a rejected <code class="language-plaintext highlighter-rouge">Promise</code>.</p>

<p><a id="fetch-options"></a></p>
<h3 id="options">Options</h3>

<p>The default values are shown after each option key.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="c1">// These properties are part of the Fetch Standard</span>
    <span class="nl">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">headers</span><span class="p">:</span> <span class="p">{},</span>        <span class="c1">// request headers. format is the identical to that accepted by the Headers constructor (see below)</span>
    <span class="nx">body</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>         <span class="c1">// request body. can be null, a string, a Buffer, a Blob, or a Node.js Readable stream</span>
    <span class="nx">redirect</span><span class="p">:</span> <span class="dl">'</span><span class="s1">follow</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// set to `manual` to extract redirect headers, `error` to reject redirect</span>
    <span class="nx">signal</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>       <span class="c1">// pass an instance of AbortSignal to optionally abort requests</span>

    <span class="c1">// The following properties are node-fetch extensions</span>
    <span class="nx">follow</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>         <span class="c1">// maximum redirect count. 0 to not follow redirect</span>
    <span class="nx">timeout</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>         <span class="c1">// req/res timeout in ms, it resets on redirect. 0 to disable (OS limit applies). Signal is recommended instead.</span>
    <span class="nx">compress</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>     <span class="c1">// support gzip/deflate content encoding. false to disable</span>
    <span class="nx">size</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>            <span class="c1">// maximum response body size in bytes. 0 to disable</span>
    <span class="nx">agent</span><span class="p">:</span> <span class="kc">null</span>         <span class="c1">// http(s).Agent instance or function that returns an instance (see below)</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="default-headers">Default Headers</h5>

<p>If no values are set, the following request headers will be sent automatically:</p>

<table>
  <thead>
    <tr>
      <th>Header</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Accept-Encoding</code></td>
      <td><code class="language-plaintext highlighter-rouge">gzip,deflate</code> <em>(when <code class="language-plaintext highlighter-rouge">options.compress === true</code>)</em></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Accept</code></td>
      <td><code class="language-plaintext highlighter-rouge">*/*</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Connection</code></td>
      <td><code class="language-plaintext highlighter-rouge">close</code> <em>(when no <code class="language-plaintext highlighter-rouge">options.agent</code> is present)</em></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Content-Length</code></td>
      <td><em>(automatically calculated, if possible)</em></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Transfer-Encoding</code></td>
      <td><code class="language-plaintext highlighter-rouge">chunked</code> <em>(when <code class="language-plaintext highlighter-rouge">req.body</code> is a stream)</em></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">User-Agent</code></td>
      <td><code class="language-plaintext highlighter-rouge">node-fetch/1.0 (+https://github.com/bitinn/node-fetch)</code></td>
    </tr>
  </tbody>
</table>

<p>Note: when <code class="language-plaintext highlighter-rouge">body</code> is a <code class="language-plaintext highlighter-rouge">Stream</code>, <code class="language-plaintext highlighter-rouge">Content-Length</code> is not set automatically.</p>

<h5 id="custom-agent">Custom Agent</h5>

<p>The <code class="language-plaintext highlighter-rouge">agent</code> option allows you to specify networking related options which are out of the scope of Fetch, including and not limited to the following:</p>

<ul>
  <li>Support self-signed certificate</li>
  <li>Use only IPv4 or IPv6</li>
  <li>Custom DNS Lookup</li>
</ul>

<p>See <a href="https://nodejs.org/api/http.html#http_new_agent_options"><code class="language-plaintext highlighter-rouge">http.Agent</code></a> for more information.</p>

<p>In addition, the <code class="language-plaintext highlighter-rouge">agent</code> option accepts a function that returns <code class="language-plaintext highlighter-rouge">http</code>(s)<code class="language-plaintext highlighter-rouge">.Agent</code> instance given current <a href="https://nodejs.org/api/url.html">URL</a>, this is useful during a redirection chain across HTTP and HTTPS protocol.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">httpAgent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Agent</span><span class="p">({</span>
    <span class="na">keepAlive</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
<span class="kd">const</span> <span class="nx">httpsAgent</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">https</span><span class="p">.</span><span class="nx">Agent</span><span class="p">({</span>
    <span class="na">keepAlive</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">agent</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">_parsedURL</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">_parsedURL</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">http:</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">httpAgent</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">httpsAgent</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a id="class-request"></a></p>
<h3 id="class-request">Class: Request</h3>

<p>An HTTP(S) request containing information about URL, method, headers, and the body. This class implements the <a href="#iface-body">Body</a> interface.</p>

<p>Due to the nature of Node.js, the following properties are not implemented at this moment:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">type</code></li>
  <li><code class="language-plaintext highlighter-rouge">destination</code></li>
  <li><code class="language-plaintext highlighter-rouge">referrer</code></li>
  <li><code class="language-plaintext highlighter-rouge">referrerPolicy</code></li>
  <li><code class="language-plaintext highlighter-rouge">mode</code></li>
  <li><code class="language-plaintext highlighter-rouge">credentials</code></li>
  <li><code class="language-plaintext highlighter-rouge">cache</code></li>
  <li><code class="language-plaintext highlighter-rouge">integrity</code></li>
  <li><code class="language-plaintext highlighter-rouge">keepalive</code></li>
</ul>

<p>The following node-fetch extension properties are provided:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">follow</code></li>
  <li><code class="language-plaintext highlighter-rouge">compress</code></li>
  <li><code class="language-plaintext highlighter-rouge">counter</code></li>
  <li><code class="language-plaintext highlighter-rouge">agent</code></li>
</ul>

<p>See <a href="#fetch-options">options</a> for exact meaning of these extensions.</p>

<h4 id="new-requestinput-options">new Request(input[, options])</h4>

<p><small><em>(spec-compliant)</em></small></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">input</code> A string representing a URL, or another <code class="language-plaintext highlighter-rouge">Request</code> (which will be cloned)</li>
  <li><code class="language-plaintext highlighter-rouge">options</code> [Options][#fetch-options] for the HTTP(S) request</li>
</ul>

<p>Constructs a new <code class="language-plaintext highlighter-rouge">Request</code> object. The constructor is identical to that in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">browser</a>.</p>

<p>In most cases, directly <code class="language-plaintext highlighter-rouge">fetch(url, options)</code> is simpler than creating a <code class="language-plaintext highlighter-rouge">Request</code> object.</p>

<p><a id="class-response"></a></p>
<h3 id="class-response">Class: Response</h3>

<p>An HTTP(S) response. This class implements the <a href="#iface-body">Body</a> interface.</p>

<p>The following properties are not implemented in node-fetch at this moment:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Response.error()</code></li>
  <li><code class="language-plaintext highlighter-rouge">Response.redirect()</code></li>
  <li><code class="language-plaintext highlighter-rouge">type</code></li>
  <li><code class="language-plaintext highlighter-rouge">trailer</code></li>
</ul>

<h4 id="new-responsebody-options">new Response([body[, options]])</h4>

<p><small><em>(spec-compliant)</em></small></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">body</code> A <code class="language-plaintext highlighter-rouge">String</code> or <a href="https://nodejs.org/api/stream.html#stream_readable_streams"><code class="language-plaintext highlighter-rouge">Readable</code> stream</a></li>
  <li><code class="language-plaintext highlighter-rouge">options</code> A <a href="https://fetch.spec.whatwg.org/#responseinit"><code class="language-plaintext highlighter-rouge">ResponseInit</code></a> options dictionary</li>
</ul>

<p>Constructs a new <code class="language-plaintext highlighter-rouge">Response</code> object. The constructor is identical to that in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/Response">browser</a>.</p>

<p>Because Node.js does not implement service workers (for which this class was designed), one rarely has to construct a <code class="language-plaintext highlighter-rouge">Response</code> directly.</p>

<h4 id="responseok">response.ok</h4>

<p><small><em>(spec-compliant)</em></small></p>

<p>Convenience property representing if the request ended normally. Will evaluate to true if the response status was greater than or equal to 200 but smaller than 300.</p>

<h4 id="responseredirected">response.redirected</h4>

<p><small><em>(spec-compliant)</em></small></p>

<p>Convenience property representing if the request has been redirected at least once. Will evaluate to true if the internal redirect counter is greater than 0.</p>

<p><a id="class-headers"></a></p>
<h3 id="class-headers">Class: Headers</h3>

<p>This class allows manipulating and iterating over a set of HTTP headers. All methods specified in the <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a> are implemented.</p>

<h4 id="new-headersinit">new Headers([init])</h4>

<p><small><em>(spec-compliant)</em></small></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">init</code> Optional argument to pre-fill the <code class="language-plaintext highlighter-rouge">Headers</code> object</li>
</ul>

<p>Construct a new <code class="language-plaintext highlighter-rouge">Headers</code> object. <code class="language-plaintext highlighter-rouge">init</code> can be either <code class="language-plaintext highlighter-rouge">null</code>, a <code class="language-plaintext highlighter-rouge">Headers</code> object, an key-value map object or any iterable object.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Example adapted from https://fetch.spec.whatwg.org/#example-headers-class</span>

<span class="kd">const</span> <span class="nx">meta</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/xml</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Breaking-Bad</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;3</span><span class="dl">'</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">(</span><span class="nx">meta</span><span class="p">);</span>

<span class="c1">// The above is equivalent to</span>
<span class="kd">const</span> <span class="nx">meta</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span> <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">text/xml</span><span class="dl">'</span> <span class="p">],</span>
  <span class="p">[</span> <span class="dl">'</span><span class="s1">Breaking-Bad</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;3</span><span class="dl">'</span> <span class="p">]</span>
<span class="p">];</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">(</span><span class="nx">meta</span><span class="p">);</span>

<span class="c1">// You can in fact use any iterable objects, like a Map or even another Headers</span>
<span class="kd">const</span> <span class="nx">meta</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
<span class="nx">meta</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">text/xml</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">meta</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">Breaking-Bad</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;3</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">(</span><span class="nx">meta</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">copyOfHeaders</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">(</span><span class="nx">headers</span><span class="p">);</span>
</code></pre></div></div>

<p><a id="iface-body"></a></p>
<h3 id="interface-body">Interface: Body</h3>

<p><code class="language-plaintext highlighter-rouge">Body</code> is an abstract interface with methods that are applicable to both <code class="language-plaintext highlighter-rouge">Request</code> and <code class="language-plaintext highlighter-rouge">Response</code> classes.</p>

<p>The following methods are not yet implemented in node-fetch at this moment:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">formData()</code></li>
</ul>

<h4 id="bodybody">body.body</h4>

<p><small><em>(deviation from spec)</em></small></p>

<ul>
  <li>Node.js <a href="https://nodejs.org/api/stream.html#stream_readable_streams"><code class="language-plaintext highlighter-rouge">Readable</code> stream</a></li>
</ul>

<p>Data are encapsulated in the <code class="language-plaintext highlighter-rouge">Body</code> object. Note that while the <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a> requires the property to always be a WHATWG <code class="language-plaintext highlighter-rouge">ReadableStream</code>, in node-fetch it is a Node.js <a href="https://nodejs.org/api/stream.html#stream_readable_streams"><code class="language-plaintext highlighter-rouge">Readable</code> stream</a>.</p>

<h4 id="bodybodyused">body.bodyUsed</h4>

<p><small><em>(spec-compliant)</em></small></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Boolean</code></li>
</ul>

<p>A boolean property for if this body has been consumed. Per the specs, a consumed body cannot be used again.</p>

<h4 id="bodyarraybuffer">body.arrayBuffer()</h4>
<h4 id="bodyblob">body.blob()</h4>
<h4 id="bodyjson">body.json()</h4>
<h4 id="bodytext">body.text()</h4>

<p><small><em>(spec-compliant)</em></small></p>

<ul>
  <li>Returns: <code>Promise</code></li>
</ul>

<p>Consume the body and return a promise that will resolve to one of these formats.</p>

<h4 id="bodybuffer">body.buffer()</h4>

<p><small><em>(node-fetch extension)</em></small></p>

<ul>
  <li>Returns: <code>Promise&lt;Buffer&gt;</code></li>
</ul>

<p>Consume the body and return a promise that will resolve to a Buffer.</p>

<h4 id="bodytextconverted">body.textConverted()</h4>

<p><small><em>(node-fetch extension)</em></small></p>

<ul>
  <li>Returns: <code>Promise&lt;String&gt;</code></li>
</ul>

<p>Identical to <code class="language-plaintext highlighter-rouge">body.text()</code>, except instead of always converting to UTF-8, encoding sniffing will be performed and text converted to UTF-8 if possible.</p>

<p>(This API requires an optional dependency of the npm package <a href="https://www.npmjs.com/package/encoding">encoding</a>, which you need to install manually. <code class="language-plaintext highlighter-rouge">webpack</code> users may see <a href="https://github.com/bitinn/node-fetch/issues/412#issuecomment-379007792">a warning message</a> due to this optional dependency.)</p>

<p><a id="class-fetcherror"></a></p>
<h3 id="class-fetcherror">Class: FetchError</h3>

<p><small><em>(node-fetch extension)</em></small></p>

<p>An operational error in the fetching process. See <a href="https://github.com/bitinn/node-fetch/blob/master/ERROR-HANDLING.md">ERROR-HANDLING.md</a> for more info.</p>

<p><a id="class-aborterror"></a></p>
<h3 id="class-aborterror">Class: AbortError</h3>

<p><small><em>(node-fetch extension)</em></small></p>

<p>An Error thrown when the request is aborted in response to an <code class="language-plaintext highlighter-rouge">AbortSignal</code>’s <code class="language-plaintext highlighter-rouge">abort</code> event. It has a <code class="language-plaintext highlighter-rouge">name</code> property of <code class="language-plaintext highlighter-rouge">AbortError</code>. See <a href="https://github.com/bitinn/node-fetch/blob/master/ERROR-HANDLING.md">ERROR-HANDLING.MD</a> for more info.</p>

<h2 id="acknowledgement">Acknowledgement</h2>

<p>Thanks to <a href="https://github.com/github/fetch">github/fetch</a> for providing a solid implementation reference.</p>

<p><code class="language-plaintext highlighter-rouge">node-fetch</code> v1 was maintained by <a href="https://github.com/bitinn">@bitinn</a>; v2 was maintained by <a href="https://github.com/timothygu">@TimothyGu</a>, <a href="https://github.com/bitinn">@bitinn</a> and <a href="https://github.com/jimmywarting">@jimmywarting</a>; v2 readme is written by <a href="https://github.com/jkantr">@jkantr</a>.</p>

<h2 id="license">License</h2>

<p>MIT</p>


        </div>
    </div>
</div>

    </div>
</div>

      <footer>
          <div class="container">
              <div class="row">
                  <div class="span4 footer-left-column">
                      <h2>On the web</h2>
                      <ul class="fa-ul">
                          <li><span class="fa-li"><i class="fas fa-users fa-fw"></i></span><a href="https://community.octoprint.org" target="_blank">Community Forum</a></li>
                          <li><span class="fa-li"><i class="fab fa-discord fa-fw"></i></span><a href="https://discord.octoprint.org" target="_blank">Discord</a></li>
                          <li><span class="fa-li"><i class="fas fa-hashtag fa-fw"></i></span><a href="ircs://irc.libera.chat:6697/#octoprint" target="_blank">IRC</a> (#octoprint on <a href="https://libera.chat" target="_blank">libera.chat</a>)</li>
                          <li><span class="fa-li"><i class="fab fa-twitter fa-fw"></i></span><a href="https://twitter.com/OctoPrint3D" target="_blank">Twitter</a></li>
                          <li><span class="fa-li"><i class="fab fa-facebook-f fa-fw"></i></span><a href="https://facebook.com/OctoPrint" target="_blank">Facebook</a></li>
                          <li><span class="fa-li"><i class="fab fa-youtube fa-fw"></i></span><a href="https://www.youtube.com/c/OctoPrint3D" target="_blank">YouTube</a></li>
                          <li><span class="fa-li"><i class="fas fa-tachometer-alt fa-fw"></i></span><a href="https://status.octoprint.org" target="_blank">Site Status</a></li>
                          <li><span class="fa-li"><i class="fas fa-gavel fa-fw"></i></span><a href="/imprint/" rel="nofollow">Legal Notice</a></li>
                          <li><span class="fa-li"><i class="fas fa-gavel fa-fw"></i></span><a href="/privacy/" rel="nofollow">Privacy Policy</a></li>
                          <li><span class="fa-li"><i class="fas fa-gavel fa-fw"></i></span><a href="/conduct/" rel="nofollow">Code of Conduct</a></li>
                      </ul>
                  </div>
                  <div class="span4">
                      <h2>Recent Posts</h2>
                      <div class="recent-posts">
                          
                          <div><a class="post-link" href="/blog/2021/08/04/new-release-candidate-1.7.0rc1/">New release candidate: 1.7.0rc1</a><br><small>04 Aug 2021</small></div>
                          
                          <div><a class="post-link" href="/blog/2021/07/27/octoprint-on-air-40/">OctoPrint On Air #40</a><br><small>27 Jul 2021</small></div>
                          
                          <div><a class="post-link" href="/blog/2021/05/28/octoprint-on-air-39/">OctoPrint On Air #39</a><br><small>28 May 2021</small></div>
                          
                          <div><a class="post-link" href="/blog/2021/05/10/new-release-1.6.1/">New release: 1.6.1</a><br><small>10 May 2021</small></div>
                          
                          <div><a class="post-link" href="/blog/2021/04/27/new-release-1.6.0/">New release: 1.6.0</a><br><small>27 Apr 2021</small></div>
                          
                      </div>
                  </div>
                  <div class="span4 footer-right-column">
                      <h2>Big Thanks</h2>
                      <p>
                          Cross-browser testing services are kindly provided by <a href="https://www.browserstack.com">BrowserStack</a>.
                          Profiling is done with the help of <a href="https://www.pyvmmonitor.com">PyVmMonitor</a>.
                          Error tracking is powered and sponsored by <a href="https://sentry.io">Sentry</a>.
                      </p>
                      <p>
                          Development would be impossible without the <a href="/support-octoprint/" data-event-category="supportlink" data-event-action="footer">financial support of the community</a>.
                      </p>
                  </div>
              </div>
              <div class="row">
                  <div class="span12 text-center legal">
                      <small>"OctoPrint" is a <a href="/trademark-rules/">registered trademark</a></small>
                  </div>
              </div>
          </div>
      </footer>


<a href="#top" class="to-top" title="Back to top" data-scroll><i class="fa fa-arrow-up fa-2x"></i></a>

<script src="/assets/js/jquery.min.js?_=1628098106"></script>
<script src="/assets/js/lodash.min.js?_=1628098106"></script>
<script src="/assets/js/prettify.min.js?_=1628098106"></script>
<script src="/assets/js/holder-2.9.3.min.js?_=1628098106"></script>
<script src="/assets/vendor/slick-1.5.9/slick.min.js?_=1628098106"></script>
<script src="/assets/js/bootstrap.min.js?_=1628098106"></script>
<script src="/assets/js/lightbox.min.js?_=1628098106"></script>
<script src="/assets/js/smooth-scroll.min.js?_=1628098106"></script>
<script src="/assets/js/site.js?_=1628098106"></script>
<script src="/assets/js/yt-with-consent.js?_=1628098106"></script>
<script src="/assets/js/autotrack.js?_=1628098106"></script>

<!-- Google Analytics -->
<script>
    var gaBaseProperty = 'UA-62479257';
    var gaProperty = gaBaseProperty + '-1';

    // opt out
    var disableStr = 'ga-disable-' + gaProperty;
    var disableCookie = 'ga-disable-' + gaBaseProperty;
    function gaOptout() {
        document.cookie = disableCookie + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/; domain=octoprint.org';
        window[disableStr] = true;
        alert("Google Analytics ist jetzt deaktiviert! / Google Analytics is now deactivated!")
    }

    // tracking code
    if (document.cookie.indexOf(disableCookie + '=true') > -1) {
        window[disableStr] = true;
    } else {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', gaProperty, 'auto');
        ga('require', 'autotrack');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
    }
</script>

</body>
</html>
